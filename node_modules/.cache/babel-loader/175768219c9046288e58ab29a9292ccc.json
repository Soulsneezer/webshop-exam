{"ast":null,"code":"import _slicedToArray from \"/Users/mr.vong/Desktop/webshop-exam/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/mr.vong/Desktop/webshop-exam/src/components/Home.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { updateCart } from '../actions/allActions';\n\nfunction Home() {\n  const updateSearch = useSelector(state => state.updateSearch);\n  const updatePartialSearch = useSelector(state => state.updatePartialSearch);\n  const dispatch = useDispatch();\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        searchResults = _useState2[0],\n        setSearchResults = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        myCart = _useState4[0],\n        setMyCart = _useState4[1];\n\n  useEffect(() => {\n    async function getFlowers() {\n      let allFlowers = await fetch('/api/flowers');\n      allFlowers = await allFlowers.json();\n      setSearchResults(allFlowers);\n    }\n\n    if (updateSearch.length > 0) {\n      setSearchResults(updateSearch);\n    } else {\n      getFlowers();\n    }\n  }, [updateSearch]);\n  useEffect(() => {\n    async function getShoppingCart() {\n      let shoppingCart = await fetch('/api/shopping-cart');\n      shoppingCart = await shoppingCart.json();\n      let flowerIds = [];\n\n      for (let flower of shoppingCart) {\n        flowerIds.push(flower.flower_id.toString());\n      }\n\n      dispatch(updateCart(flowerIds.length));\n      setMyCart(flowerIds);\n    }\n\n    getShoppingCart(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const addToCart = async e => {\n    myCart.push(e.target.id);\n    setMyCart(myCart);\n    dispatch(updateCart(myCart.length));\n    let flowerId = {\n      flowerId: e.target.id\n    };\n    await fetch('/api/shopping-cart', {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(flowerId)\n    });\n  };\n\n  const removeFromCart = async e => {\n    if (myCart.includes(e.target.id)) {\n      let flowerIndex = myCart.indexOf(e.target.id);\n      myCart.splice(flowerIndex, 1);\n      setMyCart(myCart);\n      dispatch(updateCart(myCart.length));\n      let flowerId = {\n        flowerId: e.target.id\n      };\n      await fetch('/api/shopping-cart', {\n        method: 'DELETE',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(flowerId)\n      });\n    }\n  };\n\n  console.log(searchResults);\n  return React.createElement(\"div\", {\n    className: \"home container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row flower-row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col s4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    className: \"right home-flower\",\n    alt: \"flower-logo\",\n    src: \"/icons/home-flower.svg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"col s4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    className: \"home-flower-middle\",\n    alt: \"flower-logo\",\n    src: \"/icons/home-flower.svg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"col s4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    className: \"left home-flower\",\n    alt: \"flower-logo\",\n    src: \"/icons/home-flower.svg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"row search-row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"search-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }), updateSearch.length < 1 && updatePartialSearch.length > 0 ? React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, \" S\\xF6kningen gav ingen tr\\xE4ff\") : searchResults.map(flower => React.createElement(\"div\", {\n    className: \"col s12 m6 l4\",\n    key: flower.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"card\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"card-image\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: flower.url,\n    alt: \"blomma\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    className: \"btn-floating halfway-fab waves-effect waves-dark white add\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    onClick: addToCart,\n    id: flower.id,\n    className: \"black-text material-icons\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, \"add\")), React.createElement(\"button\", {\n    className: \"btn-floating halfway-fab waves-effect waves-dark white remove\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    onClick: removeFromCart,\n    id: flower.id,\n    className: \"black-text material-icons\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, \"remove\"))), React.createElement(\"div\", {\n    className: \"card-content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"card-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, flower.title), React.createElement(\"span\", {\n    className: \"price\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, flower.price, \" kr\")))))));\n}\n\nexport default Home;","map":{"version":3,"sources":["/Users/mr.vong/Desktop/webshop-exam/src/components/Home.js"],"names":["React","useEffect","useState","useSelector","useDispatch","updateCart","Home","updateSearch","state","updatePartialSearch","dispatch","searchResults","setSearchResults","myCart","setMyCart","getFlowers","allFlowers","fetch","json","length","getShoppingCart","shoppingCart","flowerIds","flower","push","flower_id","toString","addToCart","e","target","id","flowerId","method","headers","body","JSON","stringify","removeFromCart","includes","flowerIndex","indexOf","splice","console","log","map","url","title","price"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { updateCart } from '../actions/allActions';\n\n\nfunction Home() {\n  const updateSearch = useSelector(state => state.updateSearch);\n  const updatePartialSearch = useSelector(state => state.updatePartialSearch);\n  const dispatch = useDispatch();\n  const [searchResults, setSearchResults] = useState([]);\n  const [myCart, setMyCart] = useState([]);\n\n\n  useEffect(()=> {\n    async function getFlowers() {\n      let allFlowers = await fetch('/api/flowers');\n      allFlowers = await allFlowers.json();\n\n      setSearchResults(allFlowers);\n    }\n    if(updateSearch.length > 0) {\n      setSearchResults(updateSearch)\n    } else {\n      getFlowers();\n    }\n  }, [updateSearch])\n\n\n\n  useEffect(()=> {\n    async function getShoppingCart() {\n      let shoppingCart = await fetch('/api/shopping-cart');\n      shoppingCart = await shoppingCart.json();\n\n      let flowerIds = [];\n      for(let flower of shoppingCart) {\n        flowerIds.push(flower.flower_id.toString())\n      }\n      dispatch(updateCart(flowerIds.length));\n      setMyCart(flowerIds);\n    }\n\n    getShoppingCart();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n\n  const addToCart = async e => {\n    myCart.push(e.target.id);\n    setMyCart(myCart);\n    dispatch(updateCart(myCart.length));\n\n    let flowerId = {flowerId: e.target.id}\n\n    await fetch('/api/shopping-cart', {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(flowerId)\n    });\n  }\n\n\n  const removeFromCart = async e => {\n    if(myCart.includes(e.target.id)) {\n      let flowerIndex = myCart.indexOf(e.target.id);\n      myCart.splice(flowerIndex, 1);\n      setMyCart(myCart)\n      dispatch(updateCart(myCart.length));\n      \n      let flowerId = {flowerId: e.target.id}\n\n      await fetch('/api/shopping-cart', {\n        method: 'DELETE',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(flowerId)\n      });\n    }\n  }\n\n  console.log(searchResults);\n\n\n  return (\n    <div className=\"home container\">\n\n      <div className=\"row flower-row\">\n        <div className=\"col s4\">\n          <img className=\"right home-flower\" alt=\"flower-logo\" src=\"/icons/home-flower.svg\" />\n        </div>\n        <div className=\"col s4\">\n          <img className=\"home-flower-middle\" alt=\"flower-logo\" src=\"/icons/home-flower.svg\" />\n        </div>\n        <div className=\"col s4\">\n          <img className=\"left home-flower\" alt=\"flower-logo\" src=\"/icons/home-flower.svg\" />\n        </div>\n      </div>\n\n\n      <div className=\"row search-row\">\n        <div className=\"search-title\"></div>\n\n        {(updateSearch.length < 1 && updatePartialSearch.length > 0) ? <h1> Sökningen gav ingen träff</h1> :\n    \n          searchResults.map((flower) => \n            <div className=\"col s12 m6 l4\" key={flower.id}>\n              <div className=\"card\">\n                <div className=\"card-image\">\n                  <img src={flower.url} alt=\"blomma\" />\n                  <button className=\"btn-floating halfway-fab waves-effect waves-dark white add\">\n                    <i onClick={addToCart} id={flower.id} className=\"black-text material-icons\">add</i>\n                  </button>\n                  <button className=\"btn-floating halfway-fab waves-effect waves-dark white remove\">\n                    <i onClick={removeFromCart} id={flower.id} className=\"black-text material-icons\">remove</i>\n                  </button>\n                </div>\n                <div className=\"card-content\">\n                  <span className=\"card-title\">{flower.title}</span>\n                  <span className=\"price\">{flower.price} kr</span>\n                </div>\n              </div>\n            </div>\n          )\n        }\n        \n      </div>\n    </div>\n  )\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}