{"ast":null,"code":"import _slicedToArray from \"/Users/mr.vong/Desktop/webshop-exam/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/mr.vong/Desktop/webshop-exam/src/components/ShopingCart.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch } from 'react-redux';\nimport { updateCart } from '../actions/allActions';\nimport M from 'materialize-css/dist/js/materialize.min.js';\n\nfunction ShoppingCart() {\n  const dispatch = useDispatch();\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        myShoppingCart = _useState2[0],\n        setMyShoppingCart = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        myCart = _useState4[0],\n        setMyCart = _useState4[1];\n\n  const _useState5 = useState([]),\n        _useState6 = _slicedToArray(_useState5, 2),\n        cartWithIdsToRemove = _useState6[0],\n        setCartWithIdsToRemove = _useState6[1];\n\n  const _useState7 = useState(true),\n        _useState8 = _slicedToArray(_useState7, 2),\n        trues = _useState8[0],\n        setTrues = _useState8[1];\n\n  const _useState9 = useState(0),\n        _useState10 = _slicedToArray(_useState9, 2),\n        totalPrice = _useState10[0],\n        setTotalPrice = _useState10[1];\n\n  useEffect(() => {\n    // Collect data from DB\n    async function getShoppingCart() {\n      let shoppingCart = await fetch('/api/shopping-cart');\n      shoppingCart = await shoppingCart.json();\n      let flowerIds = [];\n\n      for (let flower of shoppingCart) {\n        let flowerObj = {\n          flowerId: flower.flower_id.toString(),\n          quantity: 1\n        };\n        flowerIds.push(flowerObj);\n      }\n\n      dispatch(updateCart(flowerIds.length)); // Display my purchases\n\n      let myPurchases = [];\n\n      for (let flowerId of flowerIds) {\n        let cartFlower = await fetch('/api/flowers/' + flowerId.flowerId);\n        cartFlower = await cartFlower.json();\n        cartFlower.uniqueId += 0;\n        myPurchases.push(cartFlower);\n      } // Sums total cost\n\n\n      let totalPrice = 0;\n\n      for (let oneProd of myPurchases) {\n        totalPrice += oneProd.price;\n      }\n\n      setTotalPrice(totalPrice);\n      setMyShoppingCart(myPurchases);\n    }\n\n    getShoppingCart(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [trues]);\n  useEffect(() => {\n    async function getShoppingCart() {\n      let shoppingCart = await fetch('/api/shopping-cart');\n      shoppingCart = await shoppingCart.json();\n      let flowerIds = [];\n\n      for (let flower of shoppingCart) {\n        flowerIds.push(flower.flower_id.toString());\n      }\n\n      dispatch(updateCart(flowerIds.length));\n      setMyCart(flowerIds);\n      setCartWithIdsToRemove(shoppingCart);\n    }\n\n    getShoppingCart(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const addToCart = async e => {\n    myCart.push(e.target.id);\n    setMyCart(myCart);\n    dispatch(updateCart(myCart.length));\n    let flowerId = {\n      flowerId: e.target.id\n    };\n    await fetch('/api/shopping-cart', {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(flowerId)\n    });\n    setTrues(!trues);\n  };\n\n  const removeFromCart = async e => {\n    if (myCart.includes(e.target.id)) {\n      console.log(cartWithIdsToRemove);\n      let idToRemove = '';\n\n      for (let toRemove of cartWithIdsToRemove) {\n        if (toRemove.flower_id === e.target.id) {\n          idToRemove = toRemove.id;\n        }\n      }\n\n      console.log(idToRemove);\n      let flowerIndex = myCart.indexOf(e.target.id);\n      myCart.splice(flowerIndex, 1);\n      setMyCart(myCart);\n      dispatch(updateCart(myCart.length));\n      let flowerId = {\n        flowerId: e.target.id\n      };\n      await fetch('/api/shopping-cart', {\n        method: 'DELETE',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(flowerId)\n      });\n    }\n\n    setTrues(!trues);\n  };\n\n  document.addEventListener('DOMContentLoaded', function () {\n    let elems = document.querySelectorAll('.modal');\n    M.Modal.init(elems);\n  });\n  return React.createElement(\"div\", {\n    className: \"shopping-cart container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, \"H\\xE4r \\xE4r dina varor!\"), React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, myShoppingCart.map((flower, i) => React.createElement(\"div\", {\n    className: \"col s12 m6 l4\",\n    key: i,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"card\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"card-image\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: flower.url,\n    alt: \"blomma\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    className: \"btn-floating halfway-fab waves-effect waves-dark white add\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    onClick: addToCart,\n    id: flower.id,\n    className: \"black-text material-icons\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, \"add\")), React.createElement(\"button\", {\n    className: \"btn-floating halfway-fab waves-effect waves-dark white remove\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    onClick: removeFromCart,\n    id: flower.id,\n    className: \"black-text material-icons\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }, \"remove\"))), React.createElement(\"div\", {\n    className: \"card-content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"card-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, flower.title), React.createElement(\"span\", {\n    className: \"price\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, flower.price, \" kr\")))))), React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    \"data-target\": \"modal1\",\n    className: \"btn modal-trigger\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, \"Vidare till betalning ( \", totalPrice, \"kr )\"), React.createElement(\"div\", {\n    id: \"modal1\",\n    className: \"modal\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal-content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, React.createElement(\"h4\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, \"Betalningsmodal\"), React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, \"Detta \\xE4r endast en protyp.\"), React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, \" Du kan inte betala med denna tj\\xE4nst.\")), React.createElement(\"div\", {\n    className: \"modal-footer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    href: \"#!\",\n    className: \"modal-close waves-effect waves-green btn-flat\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168\n    },\n    __self: this\n  }, \"Ok\")))));\n}\n\nexport default ShoppingCart;","map":{"version":3,"sources":["/Users/mr.vong/Desktop/webshop-exam/src/components/ShopingCart.js"],"names":["React","useEffect","useState","useDispatch","updateCart","M","ShoppingCart","dispatch","myShoppingCart","setMyShoppingCart","myCart","setMyCart","cartWithIdsToRemove","setCartWithIdsToRemove","trues","setTrues","totalPrice","setTotalPrice","getShoppingCart","shoppingCart","fetch","json","flowerIds","flower","flowerObj","flowerId","flower_id","toString","quantity","push","length","myPurchases","cartFlower","uniqueId","oneProd","price","addToCart","e","target","id","method","headers","body","JSON","stringify","removeFromCart","includes","console","log","idToRemove","toRemove","flowerIndex","indexOf","splice","document","addEventListener","elems","querySelectorAll","Modal","init","map","i","url","title"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport { useDispatch } from 'react-redux';\nimport { updateCart } from '../actions/allActions';\nimport M from 'materialize-css/dist/js/materialize.min.js';\n\n\n\nfunction ShoppingCart() {\n  const dispatch = useDispatch();\n  const [myShoppingCart, setMyShoppingCart] = useState([]);\n  const [myCart, setMyCart] = useState([]);\n  const [cartWithIdsToRemove, setCartWithIdsToRemove] = useState([]);\n  const [trues, setTrues] = useState(true);\n  const [totalPrice, setTotalPrice] = useState(0);\n\n\n  useEffect(()=> {\n    // Collect data from DB\n    async function getShoppingCart() {\n      let shoppingCart = await fetch('/api/shopping-cart');\n      shoppingCart = await shoppingCart.json();\n      \n      let flowerIds = [];\n      for (let flower of shoppingCart) {\n        let flowerObj = { flowerId: flower.flower_id.toString(), quantity: 1 }\n        flowerIds.push(flowerObj)\n      }\n      dispatch(updateCart(flowerIds.length));\n      \n\n      // Display my purchases\n      let myPurchases = [];\n      for (let flowerId of flowerIds) {\n        let cartFlower = await fetch('/api/flowers/' + flowerId.flowerId);\n        cartFlower = await cartFlower.json();\n        cartFlower.uniqueId += 0;\n\n        myPurchases.push(cartFlower);\n      }\n\n      // Sums total cost\n      let totalPrice = 0;\n      for(let oneProd of myPurchases) {\n        totalPrice += oneProd.price\n      }\n      setTotalPrice(totalPrice)\n\n      setMyShoppingCart(myPurchases);\n    }\n\n    getShoppingCart();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [trues])\n\n\n  useEffect(()=> {\n    async function getShoppingCart() {\n      let shoppingCart = await fetch('/api/shopping-cart');\n      shoppingCart = await shoppingCart.json();\n\n      let flowerIds = [];\n      for(let flower of shoppingCart) {\n        flowerIds.push(flower.flower_id.toString())\n      }\n\n      dispatch(updateCart(flowerIds.length));\n      setMyCart(flowerIds);\n      setCartWithIdsToRemove(shoppingCart);\n    }\n\n    getShoppingCart();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const addToCart = async e => {\n    myCart.push(e.target.id);\n    setMyCart(myCart);\n    dispatch(updateCart(myCart.length));\n\n    let flowerId = {flowerId: e.target.id}\n\n    await fetch('/api/shopping-cart', {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(flowerId)\n    });\n    setTrues(!trues);\n  }\n\n\n  const removeFromCart = async e => {\n    if(myCart.includes(e.target.id)) {\n      console.log(cartWithIdsToRemove);\n      let idToRemove = '';\n      for(let toRemove of cartWithIdsToRemove) {\n        if(toRemove.flower_id === e.target.id) {\n          idToRemove = toRemove.id;\n        }\n      }\n      console.log(idToRemove);\n      \n      let flowerIndex = myCart.indexOf(e.target.id);\n      myCart.splice(flowerIndex, 1);\n      setMyCart(myCart)\n      dispatch(updateCart(myCart.length));\n    \n      let flowerId = {flowerId: e.target.id}\n      \n\n      await fetch('/api/shopping-cart', {\n        method: 'DELETE',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(flowerId)\n      });\n    }\n    setTrues(!trues);\n  }\n\n  document.addEventListener('DOMContentLoaded', function() {\n    let elems = document.querySelectorAll('.modal');\n    M.Modal.init(elems);\n  });\n\n\n  return (\n    <div className=\"shopping-cart container\">\n      <h1>\n        Här är dina varor!\n      </h1>\n      <div className=\"row\">\n        {myShoppingCart.map((flower, i) => \n          <div className=\"col s12 m6 l4\" key={i}>\n            <div className=\"card\">\n              <div className=\"card-image\">\n                <img src={flower.url} alt=\"blomma\" />\n                <button className=\"btn-floating halfway-fab waves-effect waves-dark white add\">\n                  <i onClick={addToCart} id={flower.id} className=\"black-text material-icons\">add</i>\n                </button>\n                <button className=\"btn-floating halfway-fab waves-effect waves-dark white remove\">\n                  <i onClick={removeFromCart} id={flower.id} className=\"black-text material-icons\">remove</i>\n                </button>\n              </div>\n              <div className=\"card-content\">\n                <span className=\"card-title\">{flower.title}</span>\n                <span className=\"price\">{flower.price} kr</span>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n      \n      <div className=\"row\">\n        <button data-target=\"modal1\" className=\"btn modal-trigger\">Vidare till betalning ( {totalPrice}kr )</button>\n\n        <div id=\"modal1\" className=\"modal\">\n          <div className=\"modal-content\">\n            <h4>Betalningsmodal</h4>\n            <h5>Detta är endast en protyp.</h5>\n            <h5> Du kan inte betala med denna tjänst.</h5>\n          </div>\n          <div className=\"modal-footer\">\n            <a href=\"#!\" className=\"modal-close waves-effect waves-green btn-flat\">Ok</a>\n          </div>\n        </div>\n      </div>\n\n    </div>\n\n  )\n}\n\nexport default ShoppingCart;"]},"metadata":{},"sourceType":"module"}